# FO-Pay 
基于加密稳定币 FOUSDT 的 WordPress 付费阅读插件。

## 使用介绍 

原文： http://fo.slidechan.com:8088/2020/02/01/howto/

包含以下内容：

-   获得 WordPress
-   安装 Fo-Pay 插件
-   在发布文章时启用付费阅读
-   调整注册设置，让用户注册更简单

获得 WordPress
------------

最简单的方式是直接购买 [wordpress.com](https://wordpress.com/) 的托管版本，这样不需要自己安装。如果你没有现成的服务器，而且不懂技术，这是最好的选择。

![](http://114.67.65.56:8088/wp-content/uploads/2020/02/image-1024x453.png)

但需要注意以下几点：

-   国内网络访问不太顺畅。
-   只有25美金每月的商务版才能上传插件。
-   由于作者没有商务版，我们要用到的插件并没有在其平台上测试过。

所以这个方案留给土豪们。

退而求其次，我们可以选在在内置了预装镜像的云平台进行购买。比如 [DigitalOcean](https://m.do.co/c/ae90c7f579fc) ，在创建 Droplets 时，点击 Markectplace 就可以看到。

![](http://114.67.65.56:8088/wp-content/uploads/2020/02/image-1-1024x491.png)

如果你只是想先在电脑上测试，那么可以下载 bitnami 的安装包。<https://bitnami.com/stack/wordpress>

在同一个页面，也介绍了如何通过 Docker 镜像来安装。这要求你会使用命令行工具。由于细节过于技术化，本文就不展开了。

安装 FO-Pay 插件
------------

在成功安装 WordPress 后，以管理员身份登入，进入仪表盘。在插件菜单中选择「安装插件」。

![](http://114.67.65.56:8088/wp-content/uploads/2020/02/Screen-Shot-2020-02-01-at-13.59.31.png)

点击「上传插件」按钮，把 Fo-pay.zip 上传上来。

![](http://114.67.65.56:8088/wp-content/uploads/2020/02/Screen-Shot-2020-02-01-at-14.02.20-1024x628.png)

上传完成后，启用插件。

![](http://114.67.65.56:8088/wp-content/uploads/2020/02/Screen-Shot-2020-02-01-at-14.05.00-1024x736.png)

然后我们需要进行必要的配置。

点击仪表盘「设置」菜单的「FO支付设置」进入设置界面。

![](http://114.67.65.56:8088/wp-content/uploads/2020/02/Screen-Shot-2020-02-01-at-14.06.32.png)

设置很简单，收款账户当然就是收钱用的了。没有 FIBOS 账户的同学可以去下载一个 [FO 钱包](https://wallet.fo/zh-cn/)，可以免费生成一个。

博客唯一码稍微难以理解一些。简单的说就是，插件是通过检查收款交易中的备注信息来确定是否付款的。如果我们有多个博客都用一个收款账户，就会出现文章 id 重复的情况。所以会把博客唯一码作为前缀来区分。

如果你理解不了上边这段文字，只要随便填一个短数字就好了。

记得保存更改。

在发布文章时使用付费阅读
------------

之后我们就可以在发布文章是使用付费阅读了。点击仪表盘中的「写文章」进入编辑器界面。然后再右侧的三点菜单中选择「选项」，把「高级面板」中的「自定义字段」选上，然后保存。

![](http://114.67.65.56:8088/wp-content/uploads/2020/02/Screen-Shot-2020-02-01-at-14.13.49-1024x863.png)

这样在编辑框下边会出现一个「自定义字段」表单。

![](http://114.67.65.56:8088/wp-content/uploads/2020/02/image-3-1024x810.png)

在「自定义字段」表单中，选择「输入新栏目」，名称为「fo-usdt-price」，值为文章对应的价格，单位是分。由于 FOUSDT 约等于美元，所以这里填100，就是大概1美元的价格。

注意第一次添加自定义字段栏目后，再发布文章可以直接从下拉框中选择。

免费文章不选择此字段，或者值写成0都行。

在文章中，付费内容使用下图的标签进行包裹。

![](http://114.67.65.56:8088/wp-content/uploads/2020/02/image-4.png)

当文章中没有此标签时，全文会被认为都是付费内容。由于新版 WordPress 启用了区块编辑器，你可以将 pay 标签分到两个文本区块中，这样中间的区块都会被认为是付费内容。

调整注册策略，让用户注册更简单
---------------

由于付费阅读插件是基于用户的，所以我们还要调整下默认的用户注册策略。

首先在仪表盘→设置→常规页面，将成员资格后边的「任何人都能注册」选上；然后指定新注册用户为「订阅者」。

![](http://114.67.65.56:8088/wp-content/uploads/2020/02/Screen-Shot-2020-02-01-at-14.33.11.png)

面向海外用户的业务到这里就算完成了。但如果也有部分中国大陆的用户使用的业务，我们需要改掉 WordPress 注册时验证邮箱的功能。因为大陆的邮箱业务达到率是非常差的。

这时候我们可以安装 User Registration 插件。进入仪表盘→插件→安装插件 页面，在右侧的搜索框中输入 「 User Registration 」，点击框出的那个插件进行安装。

![](http://114.67.65.56:8088/wp-content/uploads/2020/02/Screen-Shot-2020-02-01-at-14.40.24-1024x842.png)

注意有时候 WordPress 中国区的代理经常负载高，可能出现 too many connections 错误。这时候只要刷新页面重新点「现在安装」按钮就可以了。当然你也可以本地电脑切换网络下载后，直接上传上去。

安装并激活后，在仪表盘左侧菜单会出来一个「用户注册」菜单，点击设置。将「用户登录选项」选择为「注册后自动登录」或者「注册后手动登录」。

![](http://114.67.65.56:8088/wp-content/uploads/2020/02/Screen-Shot-2020-02-01-at-14.45.30.png)

这样插件就会创建一个名为「注册」的新页面，通过这个页面注册的用户是无需走邮件确认流程的。

如果你使用的是默认的2020模板，那么在右上角应该能看到这个注册链接。

![](http://114.67.65.56:8088/wp-content/uploads/2020/02/Screen-Shot-2020-02-01-at-14.49.05-1024x842.png)

再来处理最后一个细节。在默认的功能小组件（widget）里边，有一个叫「功能」的区块，它里边的注册链接还是 WordPress 原来的。进入仪表盘→外观→小工具。

![](http://114.67.65.56:8088/wp-content/uploads/2020/02/Screen-Shot-2020-02-01-at-14.52.49-1024x863.png)

在 「页脚#2」中把「功能」一项去掉。当然，你也可以手工在加一个「文本」区块，把注册和登录链接都写上。

总结
--

到这里，我们的付费阅读服务就搭建完成了。采用 FOUSDT 可以全球转账，快速又安全，而且没有手续费。

不放心持有 USDT 的同学，可以通过 UUEX 或者去中心化 OTC Dapp 兑换为美金。后者也没有手续费的，但一美金会有几分钱人民币的损耗。

通过自己搭建的 WordPress ，可以完全控制一切，不用像在别人的平台上那样看人脸色、受人牵制。

> 让创作者们得到应有的、开放的、自由的创作环境，并在全球范围内，通过受众的付费，获得持续的发展。

这是我编写这个插件的初衷。希望它可以帮到你。

## 授权

GPLV3